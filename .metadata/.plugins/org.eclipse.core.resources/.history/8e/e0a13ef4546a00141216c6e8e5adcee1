package com.example.jogodeadivinha;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import com.example.jogodeadivinha.model.JogoDeAdivinha;
import com.example.jogodeadivinha.util.Util;

public class JogoDeAdivinhaEmCurso extends Activity {

	private final static String NUMERO_JOGADA = "JOGADA";
	private JogoDeAdivinha mJogo;
	private TextView mTvDebugJogo;
	private EditText mEtNumJogada;
	private Button mBtnJogar, mBtnRestart;
	private int min, max,numeroJogada;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);

		this.setContentView(R.layout.activity_jogo_de_adivinha_em_curso);

		init();

		getDataFromBundle();
		
		mJogo = new JogoDeAdivinha(min, max);
		
		mBtnJogar.setOnClickListener(listener);
		mBtnRestart.setOnClickListener(listener);
		
	}

	
	private void getDataFromBundle() {
		Bundle extras = getIntent().getExtras();

		min = extras.getInt(JogoDeAdivinhaInicial.MINIMO);
		max = extras.getInt(JogoDeAdivinhaInicial.MAXIMO);
		
		if(min>max){
			int aux = min;
			min = max;
			max = aux;
		}
		mTvDebugJogo.setText(min + " - " + max);
	}

	private void init() {
		mTvDebugJogo = (TextView) findViewById(R.id.id_tv_debug_jogar);
		mEtNumJogada = (EditText) findViewById(R.id.id_et_numjogada);
		mBtnJogar = (Button)findViewById(R.id.id_btn_jogar);
		mBtnRestart = (Button)findViewById(R.id.id_btn_restart);
	}

	
	private View.OnClickListener listener = new OnClickListener() {
		
		@Override
		public void onClick(View v) {
			switch(v.getId()){
			case R.id.id_btn_jogar:
				mJogo.jogar(Util.getInt(mEtNumJogada));
				mTvDebugJogo.setText(mJogo.estadoDoJogoEnquantoFrase());
				break;
			case R.id.id_btn_restart:
				Intent intent = new Intent(JogoDeAdivinhaEmCurso.this, JogoDeAdivinhaInicial.class);
				startActivity(intent);
				finish();
				break;
			}
		}
	};
	
}
